# 노드 로그

이 페이지에서는 Kaia 노드에서 중요하거나 자주 묻는 몇 가지 로그에 대해 자세히 설명합니다.
Kaia 로그가 수정되거나 새로 추가/삭제된 경우 이 페이지도 수정해 주세요.

로그 유형에 대한 자세한 내용은 [log_modules.go](https://github.com/kaiachain/kaia/blob/dev/log/log_modules.go)를 참조하세요.

비정상적인 상황이 발생하면 [깃허브](https://github.com/kaiachain/kaia/issues), [카이아 포럼](https://devforum.kaia.io/) 또는 [디스코드](https://discord.com/KaiaOfficial)를 통해 카이아 팀에 신고해 주세요.

## 오류 로그

| 로그 유형      | 노드 유형                      | 로그 메시지                                                                                                                                                                                                                                                                                                                                         | 설명                                                                                                                                                                                                                                                                                                             | 추천 가이드                                                                                                                                                                         |
| :--------- | :------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 블록체인       | CN/PN/EN                   | ########## 나쁜 블록 #########체인 구성: %v<br/><br/>번호: %v해시: 0x%x%v<br/><br/>오류: %v##############################                                                                                                                                                                    | 불량 블록은 수신된 영수증과 실행 결과가 일치하지 않을 때 발생합니다. 노드가 잘못된 블록 로그와 함께 중지되는 경우 두 가지 이유가 있을 수 있습니다.  <br/>- 사례 1. 바이너리 버전과 같이 노드 구성이 잘못되었습니다.  <br/>- 사례 2. 코드에 문제가 있습니다. 다른 노드에서도 동일한 문제가 발생할 가능성이 매우 높습니다. | 이 오류는 매우 중요하므로 불량 블록이 발견되면 문제를 제기하거나 Kaia GitHub 리포지토리에 신고해 주세요.                                                                                               |
| 컨센서스이스탄불코어 | CN/PN/EN                   | **타임아웃 채널에서 빈 메시지 삭제**                                                                                                                                                                                                                                                                                                                         | 라운드 변경 타이머가 만료된다는 의미입니다. 타이머가 실수로 닫히는 경우 이 오류가 인쇄됩니다.                                                                                                                                                                                                                          | 다운로더를 시작할 때 오류가 발생할 수 있습니다.  다음 로그를 확인하면 '블록 동기화 시작됨'이라는 로그도 출력됩니다.                                                                            |
| 네트워크P2P    | CN/PN/EN                   | **Protocol istanbul/64 실패** id=04680a827fa1b240 conn=staticdial err="write tcp 10.117.2.105:34396->10.117.2.27:32323: 폐쇄 네트워크 연결 사용" <br/><br/>**Protocol istanbul/64 실패** err="shutting down" | 이 로그는 다른 노드의 연결이 끊어지면 인쇄할 수 있습니다. 일반적으로 'P2P 피어 연결 해제' 로그가 뒤따릅니다.                                                                                                                                                                                                              | 연결이 끊어진 상대방이 다시 연결되는지 확인합니다. 다시 연결되지 않으면 네트워크 상태 또는 피어 연결 [admin_peers](../../../references/json-rpc/admin/peers)을 확인하세요. |
| NodeCN     | CN                         | **SendNewBlockHashes** 오류="write tcp 10.117.2.124:24108->10.117.2.108:32323: 닫힌 네트워크 연결 사용" <br/><br/>**fail to SendNewBlockHashes** 오류="종료 중"                                                 | '프로토콜 이스탄불/64 실패'와 동일합니다.                                                                                                                                                                                                                                                                      | '프로토콜 이스탄불/64 실패'와 동일합니다.                                                                                                                                      |
| NodeCN     | CN                         | **SendNewBlock에 실패** 피어=d35220eccdb0de7b 오류="종료 중"                                                                                                                                                                                                                                                                                             | '프로토콜 이스탄불/64 실패'와 동일합니다.                                                                                                                                                                                                                                                                      | '프로토콜 이스탄불/64 실패'와 동일합니다.                                                                                                                                      |
| 네트워크RPC    | EN(대부분) | **패스트웹소켓핸들러 업그레이드 실패 메시지** 오류="웹소켓: 버전 != 13"                                                                                                                                                                                                                                                                                  | 웹소켓 연결의 버전 문제                                                                                                                                                                                                                                                                                                  | 요청의 헤더에는 값이 13으로 설정된 `Sec-Websocket-Version` 필드가 포함되어야 합니다. KAIA RPC 클라이언트를 사용하지 않으셨을 수 있습니다.                                                  |

## 경고 로그

| 로그 유형      | 노드 유형    | 로그 메시지                                                                                                                                                                                                                                                                                                                                                     | 설명                                                                                                                                                  | 추천 가이드                                                                                                                                                                                                     |
| :--------- | :------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 블록체인       | CN/PN/EN | **데이터베이스 버전 업그레이드** from=N/A to=3                                                                                                                                                                                                                                                                                                                          | 노드 시작 시점에 기록됩니다.                                                                                                                    | 직접 처리할 필요가 없습니다.                                                                                                                                                                           |
| 컨센서스이스탄불코어 | CN       | **[RC]** 라운드=                                                                                                                                                                                                                                                                                          | 라운드 변경 로그는 [RC] 태그로 시작됩니다.                                                      | 라운드가 한두 라운드로 끝나지 않고 계속 올라간다면 네트워크 상태 또는 피어 연결을 먼저 분석해야 합니다.  피어 연결 확인 API: [admin_peers](../../../references/json-rpc/admin/peers)                    |
| 컨센서스이스탄불코어 | CN       | **예기치 않은 요청** 주소= 상태="요청 수락" seq=312 오류="이전 메시지" 번호=311 해시=d960ea…6df6de                                                                                                                                                                                                                                                                                   | 제안자가 블록을 채굴하지만 예상치 못한 결과가 나옵니다. 대부분의 경우 새 블록이 되기에는 너무 오래되었습니다.                                                      | 직접 처리할 필요가 없습니다.                                                                                                                                                                           |
| 노드         | CN/PN/EN | **실패한 doConnTypeHandshake** addr=10.117.2.252:28516 conn=인바운드 conntype=-1 err="read tcp 10.117.2.78:32324->10.117.2.252:28516: i/o timeout | 전화를 걸면 두 P2P 피어가 연결을 설정합니다. 설정이 실패하면 이 로그가 인쇄됩니다.                                                                   | 연결이 끊어진 상대방이 다시 연결되는지 확인합니다. 그렇지 않은 경우 네트워크 상태 또는 피어 연결을 확인하세요. 피어 연결 확인 API: [admin_peers](../../../references/json-rpc/admin/peers) |
| NodeCN     | PN/EN    | **본문을 필터링하지 못했습니다** peer=c02e4b4d471c56b9 lenTxs=1                                                                                                                                                                                                                                                                                                         | 노드가 가져올 때 원치 않는 본문 블록 헤더를 수신했습니다.  - lenTxs: 요청되지 않은 tx 수                                                           | 직접 처리할 필요가 없습니다.                                                                                                                                                                           |
| 업무         | CN       | **시간 제한으로 인해 트랜잭션이 중단되었습니다** 해시=                                                                                                                                                                                                                                                                                                                           | 채굴 시 블록 실행 시간은 250ms를 초과해서는 안 되므로 이 시간 제한으로 인해 마지막 트랜잭션이 중단될 수 있습니다.                                                                | 트랜잭션이 블록에 들어가는지 확인합니다.                                                                                                                                                                     |
| 업무         | CN       | **거래 실패, 계정 건너뛰기** 해시=b1b26c...6b220a 오류="이체 잔액 부족"<br/><br/>오류(v1.6.2 이전)<br/>경고(v1.6.2 이후)                                                                                                         | '발신' 계정의 잔액이 부족하여 채굴 중 트랜잭션을 실행할 수 없는 경우 (이론적으로는 트랜잭션을 생성하여 txpool에 입력할 당시에는 잔액이 충분했지만 실제 실행 시점에 잔액이 부족한 경우 발생). | '발신인' 계정의 잔액이 실제로 부족하지 않은지 확인합니다.                                                                                                                                                          |

## 정보 로그

정보`로그에는 노드 상태에 대해 자세히 알 수 있는 추가 정보가 포함되어 있으므로`정보\` 레벨 로그는 처리할 필요가 없습니다.

| 로그 유형          | 노드 유형    | 로그 메시지                                                                                                                                                                                                                                                       | 설명                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :------------- | :------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 블록체인           | CN/PN/EN | **재생성된 로컬 거래 저널** 거래=0 계정=0                                                                                                                                                                                                                                  | 노드가 종료되면 로컬 tx는 파일에 저널링됩니다(기본 파일 이름은 트랜잭션.rlp). 저널링된 파일로 노드를 다시 시작하면 파일을 기반으로 로컬 트랜잭션이 다시 생성될 수 있습니다.  - 트랜잭션: 재생성된 로컬 트랜잭션의 수입니다.  - 계정: 재생성된 계정의 수(==에서)                                                                                                                                                                                                                                                                                                                                                                                    |
| 블록체인           | CN/PN/EN | **새 블록 삽입** number=14 hash=13cbfc…f007fc txs=0 gas=0 elapsed=793.458µs processTxs=167ns finalize=157.708µs validateState=7.542µs totalWrite=443.417µs trieWrite=256.667µs    | 노드가 해당 블록의 제안자가 아니며 합의에 성공하면 해당 노드는 블록을 실행(==검증)한 것입니다. 즉, 블록이 삽입됩니다.  - 가스: TX 실행 중에 소비된 총 가스입니다.  이 필드는 일반적으로 네트워크를 테스트하여 블록당 사용된 가스를 찾을 때 사용됩니다.                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 네트워크P2P        | CN/PN/EN | **[다이얼] 정적 노드에서 다이얼 후보 추가** id=62a08a4b9f091c4b NodeType=0 ip=10.117.2.8 mainPort=32323 port=[32323] | 새 P2P 피어가 연결되며, 이 피어는 정적 노드입니다. static-nodes.json 또는 addpeer api를 사용하여 수동으로 추가한 노드를 정적 노드라고 합니다. 멀티채널인 경우 두 개의 포트를 사용합니다. ex. [32323, 32324].  - 아이디: dst 피어 아이디 - 노드 유형: dst 노드 유형(cn,pn,en,bn) - 아이피: dst 아이피 - 메인포트: dst TCP 수신 포트 번호 - 포트: 메인 포트와 서브 포트를 모두 포함한 dst TCP 수신 포트 번호입니다.                                                                                                                     |
| 네트워크P2P        | CN/PN/EN | **멀티채널 P2P 피어 추가** id=28a6760472a078fb conn=staticdial peerID=28a6760472a078fb                                                                                                                                                                               | 새 피어가 멀티채널 피어로 연결됩니다.  - id/peerID: 내 노드의 피어 ID - conn: 연결 유형 - inbound: 누군가 나를 연결합니다 - staticdial: static-nodes.json 또는 addPeer와 같은 정적 연결 - trusteddial: trust-nodes.json과 같은 신뢰할 수 있는 연결입니다. 최대 연결 횟수를 초과하더라도 항상 재연결 및 설정이 가능합니다.                                                                                                                                                                                                                                                                                 |
| 네트워크P2P        | CN/PN/EN | **멀티채널 P2P 피어 연결 해제** id=28a6760472a078fb conn=인바운드 피어ID=28a6760472a078fb 피어Name=Kaia/v1.7.3+acae89350c/darwin-arm64/go1.18.1 err=EOF                                                        | 멀티채널 피어 연결이 끊어졌습니다.  - 피어 이름: 내 노드 정보가 표시됩니다 - 오류: 연결이 끊어진 이유입니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 네트워크P2P        | CN/PN/EN | **ProtocolManager.processConsensusMsg closed** id=28a6760472a078fb conn=인바운드 피어 이름=Kaia/v1.7.3+acae89350c/darwin-arm64/go1.18.1                                              | P2P 노드의 연결이 끊어지면 노드 간의 합의 메시지 채널도 닫힙니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| StorageStateDB | CN/PN/EN | **메모리 데이터베이스에서 지속된 시도** 블록넘=23460 업데이트된 노드=4 업데이트된 노드 크기=499.00B 시간=539.959µs gcnodes=68 gcsize=10.55kB gctime=226.499µs livenodes=245 livesize=37.80kB                      | 이 로그는 트라이 DB가 커밋되었음을 알리기 위해 인쇄됩니다. 여기서 커밋은 DB 변경 사항을 실제 DB로 플러시하는 것을 의미합니다.  커밋은 주기적으로 이루어집니다.  - 사례 1. 노드가 풀 노드인 경우 128블록마다 트라이 커밋이 이루어집니다.  - 사례 2. 노드가 아카이브 노드인 경우 모든 블록에 대해 트라이 커밋이 수행됩니다.  다음 상황에서도 커밋이 이루어집니다.  - 노드가 종료되면 커밋이 이루어집니다.  - 메모리 크기가 한도를 초과하면 커밋이 이루어집니다.  팁.  - gc는 가비지 컬렉션을 의미합니다. 여기서 가비지 컬렉션은 트라이 노드 변경 사항의 DB 쓰기를 플러시하는 것을 의미합니다.  - 풀 노드는 모든 128주기의 정보와 최신 128블록의 정보를 저장합니다.  - 아카이브 노드는 모든 블록의 정보를 저장합니다. |
| 업무             | CN       | **새 채굴 작업 커밋** number=14 hash=438ef7…68ca7f txs=0 elapsed=605.375µs commitTime=184.708µs finalizeTime=414.375µs                                                                                              | 번호: 블록 번호 - 해시: 블록 해시(최종 버전이 아님) - txs: 블록 내 트랜잭션 수 - 경과 시간: 총 블록 채굴 시간(commitTime + finalizeTime) - commit 시간: 블록 내 트랜잭션 실행 시간 - finalize 시간: 블록 최종 완료 시간.                                                                                                                                                                                                                                                                                                                                                                   |
| 업무             | CN       | **새 블록을 성공적으로 봉인했습니다** 번호=14 해시=13cbfc…f007fc                                                                                                                                                                                                                | [제안자만] 새 블록을 봉인하는 데 성공했습니다. 씰링에는 다음 단계가 포함됩니다.  - 블록에 대한 Ibft 합의 프로세스.  - 블록의 타임스탬프 및 서명 업데이트                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 업무             | CN       | **채굴된 블록을 성공적으로 작성했습니다** num=14 해시=13cbfc…f007fc txs=0 경과=617.709µs                                                                                                                                                                          | [제안자만] 노드가 제안자이고 합의에 성공한 경우, 제안자는 블록 실행 결과를 DB에 저장해야 합니다. 이 로그는 저장에 성공했음을 의미합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 업무             | CN       | **너무 먼 미래에서 채굴 중** 대기=1초                                                                                                                                                                                                                                     | 1초의 블록 생성 기간을 유지하기 위해 노드는 "1초 - 이전 블록 생성/전파/실행 시간" 동안 절전 모드로 전환됩니다.  - 대기: 노드가 잠자는 시간                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| VM             | CN/PN/EN | **추가 주소가 프로그램 계정이 아니므로 반환** 추가 주소=                                                                                                                                                                                                                           | 누군가 존재하지 않는 계약을 호출하려고 합니다.  팁. Kaia에서 프로그램 계정은 계약 계정과 동일합니다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
