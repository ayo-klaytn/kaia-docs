# 傳統

import { RoutePath } from '@site/src/common/codesandbox'
import Editor from '@site/src/components/Editor'

<Editor module="/src/pages/viem-ext/basic-transaction/LegacyTransaction.tsx" route={RoutePath.ViemExt_Legacy_Transaction} />

**TxTypeLegacyTransaction** 代表之前在 kaia 中存在的交易類型。

此類型的交易可以建立帳戶、轉移代幣、部署智慧型契約、執行智慧型契約，或執行前述的混合交易。

<CH.Spotlight>
  <CH.Code>
    ```js txTypeLegacyTransaction.js
    import { createWalletClient, http, kairos, privateKeyToAccount } from "@kaiachain/viem-ext";

    const legacyWallet = createWalletClient({
      chain: kairos,
      transport: http(),
      account: privateKeyToAccount(
        "0x28d06bfebe5447d798ec7d1f208a045a15a1d6872b2a3cbb74cc896817bbb90d"
      ),
    });
    (async () => {
      // legacy tx
      const legacyRequest = await legacyWallet.prepareTransactionRequest({
        to: "0x70997970c51812dc3a010c7d01b50e0d17dc79c8",
        value: 0,
      });

      console.log("populated legacy request", legacyRequest);

      const sentLegacyTx = await legacyWallet.sendTransaction(legacyRequest);
      console.log("value transfer legacy tx", sentLegacyTx);
    })();

    ```

    ---

    ```zsh output
    ❯ node txTypeLegacyTransaction.js
    populated legacy request {
      to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',
      value: 0,
      from: '0x7642e9D6F533DCd6F4c20EF7bA83141b6b210d83',
      nonce: 18,
      chainId: 1001,
      type: 'eip1559',
      maxPriorityFeePerGas: 0n,
      maxFeePerGas: 30000000000n,
      gas: 21000n
    }
    value transfer legacy tx 0x8da12ab374d592715df3bbf6cc96f11a836175daf0dec7f26295d172d6206056

    ```
  </CH.Code>

  ---

  匯入 **@kaiachain/viem-ext** 套件以在 web3 上新增 kaia 功能

  ```js txTypeLegacyTransaction.js focus=1
  ```

  ---

  使用 **createWalletClient** 設定一個錢包用戶端，並配置 **Kairos 鏈**、**HTTP 傳輸**，以及轉換為帳戶的**寄件者私密金鑰**。

  ```js txTypeLegacyTransaction.js focus=3:9
  ```

  ---

  使用 **prepareTransactionRequest** 建立**遺傳值轉移**的交易請求，指定收件者位址和要轉移的**值** (本範例中為 0)。

  <CH.Code>
    ```js txTypeLegacyTransaction.js focus=12:17
    ```

    ---

    ```zsh output
    populated legacy request {
      to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',
      value: 0,
      from: '0x7642e9D6F533DCd6F4c20EF7bA83141b6b210d83',
      nonce: 18,
      chainId: 1001,
      type: 'eip1559',
      maxPriorityFeePerGas: 0n,
      maxFeePerGas: 30000000000n,
      gas: 21000n
    }
    ```
  </CH.Code>

  ---

  使用錢包用戶端 **sendTransaction** 方法簽署並傳送傳統交易到 Kaia 區塊鏈，並記錄交易哈希值。

  <CH.Code>
    ```js txTypeLegacyTransaction.js focus=19:20
    ```

    ---

    ```zsh output
    ❯ node txTypeLegacyTransaction.js
    value transfer legacy tx 0x8da12ab374d592715df3bbf6cc96f11a836175daf0dec7f26295d172d6206056
    ```
  </CH.Code>
</CH.Spotlight>
