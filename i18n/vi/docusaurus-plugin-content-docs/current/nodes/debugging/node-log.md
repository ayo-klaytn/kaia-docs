# Nhật ký nút

Trang này cung cấp chi tiết về một số nhật ký quan trọng hoặc thường được hỏi từ các nút Kaia.
Nếu nhật ký Kaia được sửa đổi hoặc thêm mới/xóa, vui lòng cập nhật trang này tương ứng.

Để biết thêm thông tin chi tiết về các loại nhật ký, bạn có thể tham khảo [log_modules.go](https://github.com/kaiachain/kaia/blob/dev/log/log_modules.go)

Nếu bạn gặp phải bất kỳ tình huống bất thường nào, vui lòng báo cáo cho đội ngũ Kaia qua [GitHub](https://github.com/kaiachain/kaia/issues), [Diễn đàn Kaia](https://devforum.kaia.io/) hoặc [Discord](https://discord.com/KaiaOfficial).

## Nhật ký lỗi

| Loại nhật ký                             | Loại nút                        | Thông báo nhật ký                                                                                                                                                                                                                                                                                                                                                                     | Mô tả                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Hướng dẫn đề xuất                                                                                                                                                                                                                          |
| :--------------------------------------- | :------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Blockchain                               | CN/PN/EN                        | ########## LỖI BLOCK #########Cấu hình chuỗi: %v<br/><br/> Số: %vBăm: 0x%x%v<br/><br/>Lỗi: %v##############################                                                                                                                                                                                           | Một khối lỗi xảy ra khi biên lai nhận được và kết quả thực thi không khớp nhau. Nếu một nút ngừng hoạt động do nhật ký khối bị hỏng, điều này có thể do hai nguyên nhân.  <br/>- Trường hợp 1. Cấu hình của nút không chính xác, giống như phiên bản nhị phân.  <br/>- Trường hợp 2. Có vấn đề với mã nguồn. Rất có khả năng các nút khác cũng sẽ gặp phải vấn đề tương tự. | Lỗi này rất nghiêm trọng, vì vậy nếu bạn phát hiện bất kỳ khối dữ liệu hỏng nào, vui lòng tạo một vấn đề hoặc báo cáo nó lên kho lưu trữ GitHub của Kaia.                                                                  |
| Thỏa thuận Istanbul Core                 | CN/PN/EN                        | **Gửi một tin nhắn trống từ kênh thời gian chờ**                                                                                                                                                                                                                                                                                                                                      | Điều đó có nghĩa là đồng hồ đếm ngược sẽ hết thời gian. Lỗi này sẽ hiển thị nếu bộ đếm thời gian bị tắt đột ngột.                                                                                                                                                                                                                                                                                                                                           | Lỗi có thể xảy ra khi trình tải xuống được khởi động.  Kiểm tra nhật ký tiếp theo cũng được in ra: `Quá trình đồng bộ hóa khối đã bắt đầu`.                                                |
| Mạng ngang hàng (P2P) | CN/PN/EN                        | **Giao thức Istanbul/64 đã thất bại** id=04680a827fa1b240 conn=staticdial err="Viết TCP 10.117.2.105:34396->10.117.2.27:32323: sử dụng kết nối mạng đóng" <br/><br/>**Giao thức Istanbul/64 đã thất bại** err="đang tắt"              | Nhật ký này có thể được in khi nút khác bị ngắt kết nối. Thường đi kèm với nhật ký `Đã ngắt kết nối với đối tác P2P`.                                                                                                                                                                                                                                                                                                                                       | Kiểm tra xem đối tác đã ngắt kết nối có được kết nối lại hay không. Nếu không thể kết nối lại, hãy kiểm tra trạng thái mạng hoặc kết nối peer [admin_peers](../../../references/json-rpc/admin/peers) |
| Nút CN                                   | CN                              | **Không thể gửi các băm khối mới** Lỗi: "Viết qua kết nối TCP 10.117.2.124:24108->10.117.2.108:32323: Sử dụng kết nối mạng đã đóng" <br/><br/> **Không thể gửi các băm khối mới** Lỗi: "Đang tắt máy" | Cùng với `Protocol istanbul/64 failed`                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Cùng với `Protocol istanbul/64 failed`                                                                                                                                                                                                     |
| Nút CN                                   | CN                              | **Không thể gửi khối mới** peer=d35220eccdb0de7b lỗi="đang tắt máy"                                                                                                                                                                                                                                                                                                                   | Cùng với `Protocol istanbul/64 failed`                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Cùng với `Protocol istanbul/64 failed`                                                                                                                                                                                                     |
| Mạng lưới RPC                            | EN (chủ yếu) | **Lỗi xử lý FastWebsocketHandler không thể nâng cấp tin nhắn** lỗi="websocket: phiên bản không phải 13"                                                                                                                                                                                                                                                               | Vấn đề phiên bản của kết nối WebSocket                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Đầu đề của yêu cầu phải chứa trường `Sec-Websocket-Version` với giá trị được đặt là 13. Bạn có thể chưa từng sử dụng client Kaia RPC.                                                                      |

## Nhật ký cảnh báo

| Loại nhật ký             | Loại nút | Thông báo nhật ký                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Mô tả                                                                                                                                                                                                                                                                                                    | Hướng dẫn đề xuất                                                                                                                                                                                                                                                                            |
| :----------------------- | :------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Blockchain               | CN/PN/EN | **Nâng cấp phiên bản cơ sở dữ liệu** từ=N/A lên=3                                                                                                                                                                                                                                                                                                                                                                                                                 | Nó được ghi lại tại thời điểm khởi động của nút.                                                                                                                                                                                                                                         | Bạn không cần phải xử lý việc này.                                                                                                                                                                                                                                           |
| Thỏa thuận Istanbul Core | CN       | **[RC]** vòng=                                                                                                                                                                                                                                                                                                                                                                                                | Bản ghi thay đổi vòng lặp được bắt đầu với thẻ [RC].                                                                                                                                                                                 | Nếu vòng đấu không kết thúc sau một hoặc hai vòng và tiếp tục tăng lên, thì trước tiên cần phân tích trạng thái mạng hoặc kết nối giữa các nút.  Kiểm tra kết nối đồng cấp API: [admin_peers](../../../references/json-rpc/admin/peers) |
| Thỏa thuận Istanbul Core | CN       | **Yêu cầu bất thường**  địa chỉ= trạng thái="Chấp nhận yêu cầu" thứ tự=312 lỗi="Thông điệp cũ" số=311 băm=d960ea…6df6de                                                                                                                                                                                                                                                                                                                                           | Người đề xuất khai thác một khối, nhưng kết quả lại không như mong đợi. Trong hầu hết các trường hợp, nó đã quá cũ để trở thành một khối mới.                                                                                                                            | Bạn không cần phải xử lý việc này.                                                                                                                                                                                                                                           |
| Nút                      | CN/PN/EN | **Lỗi doConnTypeHandshake** Địa chỉ nguồn: 10.117.2.252:28516 Kết nối: vào Kết nối loại: -1 Lỗi: "Đọc TCP từ 10.117.2.78:32324 đến 10.117.2.252:28516: Thời gian chờ I/O hết hạn" | Bằng cách quay số, hai nút ngang hàng (P2P) thiết lập kết nối. Nhật ký này sẽ được in ra nếu quá trình cài đặt không thành công.                                                                                                                      | Kiểm tra xem đối tác đã ngắt kết nối có được kết nối lại hay không. Nếu không, hãy kiểm tra trạng thái mạng hoặc kết nối peer. Kiểm tra kết nối peer qua API: [admin_peers](../../../references/json-rpc/admin/peers)   |
| Nút CN                   | PN/EN    | **Không thể lọc các giao dịch** peer=c02e4b4d471c56b9 lenTxs=1                                                                                                                                                                                                                                                                                                                                                                                                    | Một nút đã nhận được tiêu đề khối không mong muốn của phần thân khi đang tải xuống.  - lenTxs: Số lượng giao dịch không được yêu cầu                                                                                                                                     | Bạn không cần phải xử lý việc này.                                                                                                                                                                                                                                           |
| Công việc                | CN       | **Giao dịch bị hủy do hết thời gian** hash=                                                                                                                                                                                                                                                                                                                                                                                                                       | Thời gian thực thi khối khi khai thác không được vượt quá 250ms, do đó giao dịch cuối cùng có thể bị hủy bỏ do giới hạn thời gian này.                                                                                                                                                   | Xác nhận rằng giao dịch đã được đưa vào khối.                                                                                                                                                                                                                                |
| Công việc                | CN       | **Giao dịch thất bại, tài khoản bị bỏ qua** hash=b1b26c...6b220a err="Số dư không đủ để chuyển khoản"<br/><br/>Lỗi (trước phiên bản v1.6.2)<br/>Cảnh báo (sau phiên bản v1.6.2)                                                                                                                             | Khi một giao dịch không thể được thực hiện trong quá trình khai thác do số dư trong tài khoản `from` không đủ  (Về mặt lý thuyết, điều này xảy ra khi số dư đủ tại thời điểm giao dịch được tạo và đưa vào txpool, nhưng không đủ tại thời điểm thực hiện giao dịch.) | Kiểm tra xem tài khoản `from` có thực sự bị thiếu hụt hay không.                                                                                                                                                                                                             |

## Nhật ký thông tin

Nhật ký `Info` chứa thông tin bổ sung giúp bạn hiểu rõ hơn về trạng thái của nút, do đó bạn không cần phải xử lý nhật ký cấp độ `Info`.

| Loại nhật ký                             | Loại nút | Thông báo nhật ký                                                                                                                                                                                                                                                                                                                               | Mô tả                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :--------------------------------------- | :------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Blockchain                               | CN/PN/EN | **Sổ nhật ký giao dịch địa phương đã được tái tạo** giao dịch=0 tài khoản=0                                                                                                                                                                                                                                                                     | Khi nút bị tắt, các giao dịch cục bộ sẽ được ghi vào một tệp (tên tệp mặc định là transactions.rlp). Khi nút được khởi động lại với tệp nhật ký, các giao dịch cục bộ có thể được tái tạo dựa trên tệp đó.  - Giao dịch: Số của giao dịch cục bộ được tái tạo.  - Tài khoản: Số lượng tài khoản được tái tạo (==từ)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Blockchain                               | CN/PN/EN | **Đã chèn một khối mới** số=14 băm=13cbfc…f007fc giao dịch=0 gas=0 thời gian trôi qua=793,458µs  xử lý giao dịch=167ns hoàn tất=157,708µs xác thực trạng thái=7,542µs tổng ghi=443,417µs ghi trie=256.667µs                                                                                                                     | Nếu nút không phải là nút đề xuất tại khối đó và quá trình đồng thuận thành công, nút đã thực thi (==xác thực) khối. Nói cách khác, một khối được chèn vào.  - Khí: Tổng lượng khí tiêu thụ trong quá trình thực thi giao dịch.  Trường này thường được sử dụng khi kiểm tra mạng để xác định lượng gas được sử dụng cho mỗi khối.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Mạng ngang hàng (P2P) | CN/PN/EN | **[Dial] Thêm ứng viên dial từ các nút tĩnh**  id=62a08a4b9f091c4b NodeType=0 ip=10.117.2.8 mainPort=32323 port=[32323]                                                                 | Một nút P2P mới đã được kết nối, và đây là một nút tĩnh. Một nút được thêm thủ công bằng cách sử dụng static-nodes.json hoặc API addpeer được gọi là nút tĩnh. Nếu là thiết bị đa kênh, nó sử dụng hai cổng. Ví dụ: [32323, 32324].  - id: ID đối tác đích  - NodeType: Loại nút đích (cn, pn, en, bn)  - ip: Địa chỉ IP đích  - mainPort: Số cổng TCP lắng nghe của nút đích  - port: Số cổng TCP lắng nghe của nút đích, bao gồm cả cổng chính và cổng phụ.                                                                                                                                                                                                                                                                                                                                                                |
| Mạng ngang hàng (P2P) | CN/PN/EN | **Thêm một nút P2P đa kênh** id=28a6760472a078fb conn=staticdial peerID=28a6760472a078fb                                                                                                                                                                                                                                                        | Một peer mới đã được kết nối dưới dạng peer đa kênh.  - id/peerID: ID đồng đẳng của nút của tôi  - conn: Loại kết nối  - inbound: Có người kết nối với tôi  - staticdial: Kết nối tĩnh, chẳng hạn như static-nodes.json hoặc addPeer  - trusteddial: Kết nối đáng tin cậy, chẳng hạn như trust-nodes.json. Nó có thể luôn được kết nối lại và thiết lập ngay cả khi số lượng kết nối vượt quá giới hạn tối đa.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Mạng ngang hàng (P2P) | CN/PN/EN | **Đã ngắt kết nối với nút ngang hàng P2P đa kênh** id=28a6760472a078fb conn=inbound    peerID=28a6760472a078fb peerName=Kaia/v1.7.3+acae89350c/darwin-arm64/go1.18.1 err=EOF                                                                                                    | Một đối tác đa kênh đã bị ngắt kết nối.  - peerName: Hiển thị thông tin nút của tôi  - err: Lý do kết nối bị ngắt kết nối                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Mạng ngang hàng (P2P) | CN/PN/EN | **ProtocolManager.processConsensusMsg đã đóng** id=28a6760472a078fb conn=inbound    PeerName=Kaia/v1.7.3+acae89350c/darwin-arm64/go1.18.1                                                                                                                       | Khi một nút P2P bị ngắt kết nối, kênh tin nhắn đồng thuận giữa chúng cũng bị đóng.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Cơ sở dữ liệu trạng thái lưu trữ         | CN/PN/EN | **Cây trie được lưu trữ từ cơ sở dữ liệu bộ nhớ** blockNum=23460 số nút được cập nhật=4 kích thước nút được cập nhật=499.00B thời gian=539.959µs  số nút gc=68  kích thước gc=10.55kB thời gian gc=226.499µs  số nút hoạt động=245 kích thước hoạt động=37.80kB | Nhật ký này được in ra để thông báo cho bạn rằng cơ sở dữ liệu trie đã được cam kết. Ở đây, "commit" có nghĩa là ghi các thay đổi trong cơ sở dữ liệu vào cơ sở dữ liệu thực tế.  Một commit được thực hiện định kỳ.  - Trường hợp 1. Nếu nút là nút đầy đủ, cam kết trie được thực hiện cho mỗi 128 khối.  - Trường hợp 2. Nếu nút là nút lưu trữ, mỗi khối sẽ được ghi vào cây trie.  Cam kết cũng được thực hiện trong các trường hợp sau đây.  - , Một cam kết được thực hiện khi một nút bị tắt.  - Một commit được thực hiện khi kích thước bộ nhớ vượt quá giới hạn.  Mẹo.  - gc là viết tắt của thu gom rác. Ở đây, thu gom rác có nghĩa là xóa các thao tác ghi cơ sở dữ liệu liên quan đến thay đổi nút trie.  - Một nút đầy đủ lưu trữ thông tin của mỗi chu kỳ 128 và 128 khối mới nhất.  - Nút lưu trữ lưu trữ thông tin của mỗi khối. |
| Công việc                                | CN       | **Cam kết công việc khai thác mới** số=14 băm=438ef7…68ca7f giao dịch=0 thời gian trôi qua=605,375µs thời gian cam kết=184,708µs thời gian hoàn tất=414,375µs                                                                                                                                                                                   | Mỗi CN khai thác một khối để chuẩn bị cho việc thay đổi vòng - Số: Số khối - Hash: Hash của khối (đây không phải là phiên bản cuối cùng)  - Txs: Số giao dịch trong một khối - Thời gian đã trôi qua: Thời gian khai thác khối tổng cộng (commitTime + finalizeTime) - commitTime: Thời gian thực thi giao dịch trong một khối - finalizeTime: Thời gian hoàn tất khối                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Công việc                                | CN       | **Đã thành công trong việc đóng dấu khối mới** số=14 băm=13cbfc…f007fc                                                                                                                                                                                                                                                                          | [Chỉ người đề xuất] Việc đóng dấu khối mới đã thành công. Quy trình đóng gói bao gồm các bước sau đây.  - Quy trình đồng thuận Ibft cho khối.  - Cập nhật dấu thời gian và chữ ký của khối                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Công việc                                | CN       | **Đã thành công trong việc khai thác khối** num=14 hash=13cbfc…f007fc txs=0 elapsed=617.709µs                                                                                                                                                                                                                                   | [Chỉ dành cho người đề xuất] Nếu nút là người đề xuất và quá trình đồng thuận thành công, người đề xuất cần lưu kết quả thực thi khối vào cơ sở dữ liệu. Nhật ký này cho biết việc lưu trữ đã thành công.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Công việc                                | CN       | **Khai thác quá xa trong tương lai** wait=1s                                                                                                                                                                                                                                                                                                    | Để duy trì khoảng thời gian tạo khối là 1 giây, nút sẽ ngủ trong khoảng thời gian "1 giây trừ đi thời gian tạo/truyền tải/thực thi khối trước đó".  - Thời gian chờ: Thời gian mà nút ngừng hoạt động.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Máy ảo                                   | CN/PN/EN | **Trả về vì addr không phải là tài khoản chương trình** addr=                                                                                                                                                                                                                                                                                   | Ai đó cố gắng gọi một hợp đồng không tồn tại.  Mẹo. Trong Kaia, tài khoản chương trình tương đương với tài khoản hợp đồng.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
